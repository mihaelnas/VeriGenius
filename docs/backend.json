{
  "entities": {
    "Student": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Student",
      "type": "object",
      "description": "Represents a student in the university system.",
      "properties": {
        "firstName": {
          "type": "string",
          "description": "The first name of the student."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the student."
        },
        "studentId": {
          "type": "string",
          "description": "The student's unique identification number (matricule)."
        },
        "level": {
          "type": "string",
          "description": "The student's current academic level (e.g., 'Bachelor', 'Master')."
        },
        "fieldOfStudy": {
          "type": "string",
          "description": "The student's field of study or major (filiere)."
        },
        "status": {
            "type": "string",
            "description": "The student's current registration status.",
            "enum": ["pending_payment", "partially_paid", "fully_paid", "inactive"]
        },
        "classId": {
            "type": "string",
            "description": "A reference to the Class document this student is enrolled in."
        }
      },
      "required": [
        "firstName",
        "lastName",
        "studentId",
        "level",
        "fieldOfStudy",
        "status",
        "classId"
      ]
    },
    "Class": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Class",
      "type": "object",
      "description": "Represents a class or course offered by the university.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the class (e.g., 'Introduction to Programming')."
        },
        "level": {
          "type": "string",
          "description": "The academic level of the class (e.g., '100', '200')."
        },
        "fieldOfStudy": {
          "type": "string",
          "description": "The field of study to which the class belongs."
        },
        "studentIds": {
          "type": "array",
          "description": "An array of student document IDs for students enrolled in this class.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "name",
        "level",
        "fieldOfStudy"
      ]
    },
    "ApiRequestLog": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "API Request Log",
      "type": "object",
      "description": "Represents a log of a request made to the validation API.",
      "properties": {
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "The ISO 8601 timestamp of when the request was received."
        },
        "requestBody": {
          "type": "object",
          "description": "The JSON body of the incoming request."
        },
        "responseBody": {
          "type": "object",
          "description": "The JSON body of the outgoing response."
        },
        "statusCode": {
          "type": "number",
          "description": "The HTTP status code of the response."
        },
        "isSuccess": {
          "type": "boolean",
          "description": "True if the request was processed successfully (status 200)."
        },
        "clientIp": {
          "type": "string",
          "description": "The IP address of the client making the request."
        }
      },
      "required": ["timestamp", "requestBody", "responseBody", "statusCode", "isSuccess"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/students/{studentId}": {
      "schema": { "$ref": "#/entities/Student" },
      "description": "Stores student profile information. The document ID is a unique ID. Includes fields: firstName, lastName, studentId (matricule), level, fieldOfStudy, status, and classId."
    },
    "/classes/{classId}": {
      "schema": { "$ref": "#/entities/Class" },
      "description": "Stores class information, including the class name, level, field of study, and a list of enrolled student document IDs. The studentId in the student document references this document."
    },
    "/request-logs/{logId}": {
      "schema": { "$ref": "#/entities/ApiRequestLog" },
      "description": "Stores logs of requests made to the student validation API."
    }
  }
}
